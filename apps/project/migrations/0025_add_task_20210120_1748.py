# Generated by Django 3.0.8 on 2021-01-20 08:48

from django.db import migrations


class Migration(migrations.Migration):

    dependencies = [
        ('project', '0024_add_token_20210120_1225'),
    ]

    sqlCache = []
    reverseSqlCache = []

    taskList=[
        ["기능정리/부품선정 및 수배",1,3,"기능정리/부품선정 및 수배1-3주차","회로"],
        ["블록도 작성 및 검토",4,4,"블록도 작성 및 검토4-4주차","회로"],
        ["기구 검토",1,2,"기구 검토1-2주차","디자인"],
        ["Artwork Design",5,5,"Artwork Design5-5주차","회로"],
        ["회로설계",6,8,"회로설계6-8주차","회로"],
        ["회로 리뷰 및 테스트 PCB 제작",9,9,"회로 리뷰 및 테스트 PCB 제작9-9주차","회로"],
        ["디버깅 및 회로도 수정",10,11,"디버깅 및 회로도 수정10-11주차","회로"],
        ["SMT 생산",12,12,"SMT 생산12-12주차","회로"],
        ["디자인 스케치",1,2,"디자인 스케치1-2주차","디자인"],
        ["디자인 모델링",3,4,"디자인 모델링3-4주차","디자인"],
        ["디자인 Q/A 및 수정",3,4,"디자인 Q/A 및 수정 3-4주차","디자인"],
        ["구조 설계 및 검토",5,5,"구조 설계 및 검토 5-5주차, 디자인과 회로,기구설계 제품","기구설계"],
        ["구조 설계 및 검토",3,3,"구조 설계 및 검토 3-3주차, 디자인/기구설계 제품","기구설계"],
        ["구조 설계 및 검토",1,1,"구조설계 및 검토 1-1주차, 기구설계만 있는 경우","기구설계"],
        ["기구설계",2,3,"기구설계 2-3주차, 기구설계만 있는 제품","기구설계"],
        ["기구설계",4,5,"기구설계 4-5주차, 디자인/기구설계만 있는 제품","기구설계"],
        ["기구설계",8,9,"기구설계 8-9주차, 디자인,회로,기구설계 제품","기구설계"],
        ["설계 검토 및 테스트 재설계",4,4,"설계 검토 및 테스트 재설계 4-4주차, 기구설계만 있는 경우","기구설계"],
        ["설계 검토 및 테스트 재설계",5,5,"설계 검토 및 테스트 재설계 5-5주차, 디자인/기구설계 제품","기구설계"],
        ["설계 검토 및 테스트 재설계",10,10,"설계 검토 및 테스트 재설계 10-10주차, 디자인/회로/기구설계 제품","기구설계"],
        ["목업제작",5,6,"목업제작 5-6주차, 기구설계 제품","목업"],
        ["목업제작",6,7,"목업제작 6-7주차, 디자인/기구설계 제품","목업"],
        ["목업제작",11,12,"목업제작 11-12주차, 디자인/기구설계 제품","목업"],
        ["동작 시나리오 설계 및 프로토콜 정의",1,3,"동작 시나리오 설계 및 프로토콜 정의1-3주차","회로"],
        ["F/W Coding",6,9,"F/W Coding 6-9주차","회로"],
        ["스토리보드 기획",1,2,"스토리보드 기획1-2주차, S/W","App"],
        ["Server-Side 개발",3,8,"Server-Side 개발3-8주차, S/W","APP"],
        ["Client-side 개발",5,9,"Client-side 개발5-9주차, S/W","App"],
        ["Q/A 및 디버깅",10,13,"Q/A 및 디버깅10-13주차, S/W","App"],
        ["최종 설계 수정 및 양산성 검토",7,7,"최종 설계 수정 및 양산성 검토7-7주차, 기구설계 제품","기구설계"],
        ["최종 설계 수정 및 양산성 검토",8,8,"최종 설계 수정 및 양산성 검토8-8주차, 디자인/기구설계 제품","기구설계"],
        ["최종 설계 수정 및 양산성 검토",13,13,"최종 설계 수정 및 양산성 검토13-13주차, 디자인/회로/기구설계 제품","기구설계"],
        ["양산 프로세스 설계 및 업체 수배",8,9,"양산 프로세스 설계 및 업체 수배8-9주차, 기구설계 제품","기구설계"],
        ["양산 프로세스 설계 및 업체 수배",9,10,"양산 프로세스 설계 및 업체 수배9-10주차, 디자인/기구설계 제품","기구설계"],
        ["양산 프로세스 설계 및 업체 수배",14,15,"양산 프로세스 설계 및 업체 수배14-15주차, 디자인/회로/기구설계 제품","기구설계"],
    ]

    

    for task in taskList:
        sqlCache.append(
            """
                insert into public."project_task"
                ("name", "startPeriod","endPeriod","showName","category")
                values(
                    '{name}',
                    '{startPeriod}',
                    '{endPeriod}',
                    '{showName}',
                    '{category}'
                );
            """.format(
                name = task[0],
                startPeriod=task[1],
                endPeriod=task[2],
                showName=task[3],
                category=task[4]
                )
        )

    reverseSqlCache.append(
        """
            delete from public."project_task";
            ALTER SEQUENCE "project_task_id_seq" RESTART WITH 1;
        """
    )

    operations = [
        migrations.RunSQL(
            sql = reverseSqlCache, 
            reverse_sql = reverseSqlCache
        ),
        migrations.RunSQL(
            sql = sqlCache, 
            reverse_sql = reverseSqlCache
        )
    ]
